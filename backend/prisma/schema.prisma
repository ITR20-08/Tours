generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model benefit {
  id          Int            @id @default(autoincrement())
  description String         @db.VarChar(45)
  tours       tour_benefit[]
}

model category {
  id          Int    @id @default(autoincrement())
  description String @db.VarChar(45)
  tour        tour[]
}

model location {
  id      Int    @id @default(autoincrement())
  country String @db.VarChar(45)
  city    String @db.VarChar(45)
  tour    tour[]
}

model picture {
  id      Int    @id @default(autoincrement())
  Tour    String @db.VarChar(20)
  picture Bytes
  tour    tour   @relation(fields: [Tour], references: [id])

  @@index([Tour], name: "fk_Pictures_Tour1_idx")
}

model reservation {
  id       Int    @id @default(autoincrement())
  Tour     String @db.VarChar(20)
  quantity Int
  User     String @db.VarChar(45)
  tour     tour   @relation(fields: [Tour], references: [id])
  user     user   @relation(fields: [User], references: [email])

  @@index([Tour], name: "fk_Reservation_Tour1_idx")
  @@index([User], name: "fk_Reservation_User1_idx")
}

model review {
  id           Int    @id @default(autoincrement())
  description  String @db.VarChar(45)
  calification Int
  Tour         String @db.VarChar(20)
  User         String @db.VarChar(45)
  tour         tour   @relation(fields: [Tour], references: [id])
  user         user   @relation(fields: [User], references: [email])

  @@index([User], name: "fk_Review_User1_idx")
  @@index([Tour], name: "fk_Reviews_Tour1_idx")
}

model tour {
  id               String         @id @db.VarChar(20)
  name             String         @db.VarChar(45)
  description      String         @db.VarChar(45)
  duration         Int
  start_date       DateTime       @db.Date
  price_for_person Decimal        @db.Decimal(10, 0)
  max_capacity     Int
  calification     Int
  Category         Int
  Location         Int
  category         category       @relation(fields: [Category], references: [id])
  location         location       @relation(fields: [Location], references: [id])
  favorite         favorite[]
  picture          picture[]
  reservation      reservation[]
  review           review[]
  benefits         tour_benefit[]

  @@index([Category], name: "fk_Tour_Category1_idx")
  @@index([Location], name: "fk_Tour_Location1_idx")
}

model tour_benefit {
  Tour    String  @db.VarChar(20)
  Benefit Int
  benefit benefit @relation(fields: [Benefit], references: [id])
  tour    tour    @relation(fields: [Tour], references: [id])

  @@id([Tour, Benefit])
  @@index([Benefit], name: "fk_Tour_benefits_Benefits1_idx")
  @@index([Tour], name: "fk_Tour_benefits_Tour1_idx")
}

model user {
  email       String        @id @db.VarChar(45)
  name        String        @db.VarChar(45)
  last_name   String        @db.VarChar(45)
  country     String        @db.VarChar(45)
  birth_date  DateTime      @db.Date
  password    String        @db.VarChar(45)
  type        String        @db.VarChar(45)
  favorite    favorite[]
  reservation reservation[]
  review      review[]
}

model favorite {
  id         Int    @id @default(autoincrement())
  user_email String @db.VarChar(45)
  tour_id    String @db.VarChar(20)
  tour       tour   @relation(fields: [tour_id], references: [id])
  user       user   @relation(fields: [user_email], references: [email])

  @@index([tour_id], name: "fk_favorite_tour1_idx")
  @@index([user_email], name: "fk_favorite_user1_idx")
}
